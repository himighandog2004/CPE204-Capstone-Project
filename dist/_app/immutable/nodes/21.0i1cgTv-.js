import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as U,a as W,f as pe,B as ve,c as s,d as t,g as a,m as d,b as l,n as Me,r,t as ie}from"../chunks/7rSjAqwL.js";import{e as Fe,s as oe}from"../chunks/CZq_rD3P.js";import{i as R}from"../chunks/BuTimael.js";import{c as ue,a as u,t as A,b as Pe}from"../chunks/VPhd0wVP.js";import{s as De,r as v}from"../chunks/DNYWoyz_.js";import{a as de,b as h}from"../chunks/CeqDkE_D.js";import{p as ke}from"../chunks/CWmzcjye.js";import{i as Ne}from"../chunks/xGIyzegC.js";import{m as ze,h as je,n as qe,d as Be,a as Ee}from"../chunks/D746TuBs.js";import{s as me}from"../chunks/DpqVpZMB.js";import{s as fe,r as ge}from"../chunks/GG1tSu-F.js";import{I as be}from"../chunks/CUehNlBl.js";import{H as Ie}from"../chunks/Bv7v9cgN.js";import{M as Le}from"../chunks/D_V94MuS.js";import{K as Ze}from"../chunks/D-hZwQpL.js";function Ce(m,i){U(i,!0);let x=ge(i,["$$slots","$$events","$$legacy"]);be(m,fe({name:"phone"},()=>x,{iconNode:[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}]],children:(f,g)=>{var o=ue(),b=pe(o);me(b,()=>i.children??ve),u(f,o)},$$slots:{default:!0}})),W()}function ce(m,i){U(i,!0);let x=ge(i,["$$slots","$$events","$$legacy"]);be(m,fe({name:"user"},()=>x,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(f,g)=>{var o=ue(),b=pe(o);me(b,()=>i.children??ve),u(f,o)},$$slots:{default:!0}})),W()}var He=A('<a href="/" class="flex items-center justify-start w-full"><img src="/backbtn.png" alt="Back Button" class="backbtn w-8 h-8 mt-15 ml-3 hover:bg-[#FFFF] rounded-xl duration-300 svelte-iosgd9"></a>');function Se(m){var i=He();u(m,i)}var Ke=A('<span class="loading loading-spinner text-neutral"></span>'),Re=A('<div class="toast toast-end"><div role="alert" class="alert alert-error alert-soft mt-4 text-white rounded-lg"><span> </span></div></div>'),Ue=A('<div class="toast toast-end"><div class="alert alert-success alert-soft mt-4 text-white rounded-lg"><span> </span></div></div>'),We=A(`<div class="bg-[#181818] w-screen h-screen flex flex-col items-center justify-center"><div class="register-card rounded-3xl bg-[#f7374f] flex flex-col justify-center items-center w-[25%] pb-4 "><!> <div class="flex flex-col items-center pt-2 pb-2"><img src="/cloudward.png" alt="Logo" class="w-15 h-15 mt-6"> <h1 class="text-3xl text-white font-bold mt-2">CloudWard</h1> <p class="text-white text-base">Registration</p></div> <form class="flex flex-col items-center space-y-4 mt-3 w-full"><label class="flex flex-row justify-around w-1/2"><input type="radio" name="radio-9" class="radio radio-info" required> <p class="text-white">Male</p> <input type="radio" name="radio-9" class="radio radio-info"> <p class="text-white">Female</p></label> <label class="input validator input-neutral svelte-gxv4vn"><!> <input class="grow" pattern="[A-Za-z]+([ '\\-][A-Za-z]+)*$" required type="text" placeholder="First Name"></label> <label class="input validator input-neutral svelte-gxv4vn"><!> <input class="grow" pattern="[A-Za-z]+([ '\\-][A-Za-z]+)*$" required type="text" placeholder="Last Name"></label> <input type="date" class="input input-neutral svelte-gxv4vn" placeholder="Birthdate"> <label class="input input-neutral svelte-gxv4vn"><!> <input class="grow" title="Enter a valid phone number starting with 09" maxlength="11" required type="tel" placeholder="e.g. 09943367206"></label> <label class="input input-neutral svelte-gxv4vn"><!> <input class="grow" type="text" placeholder="Address"></label> <label class="input validator input-neutral svelte-gxv4vn"><!> <input class="grow" type="email" placeholder="Email"></label> <label class="input input-neutral svelte-gxv4vn"><!> <input class="grow" minlength="6" type="password" placeholder="Password"></label> <button type="submit" class="btn btn-success btn-soft rounded-xl w-1/2 font-bold"><!></button> <p class="text-white text-sm">Already have an account? <a href="/login" class="log-link font-bold text-[#181818] svelte-gxv4vn">Login</a></p> <!> <!></form></div></div>`);function da(m,i){U(i,!1);const x=[];let y=d(""),f=d(""),g=d(""),o=d(""),b=d(""),F=d(""),P=d(""),D=d(""),k=d(""),w=d(""),N=d(!1);async function _e(){l(N,!0),l(w,"");try{const n=(await ze(je,a(P),a(D))).user;let c=0;if(a(g)){const p=new Date(a(g)),_=new Date;c=_.getFullYear()-p.getFullYear();const ne=_.getMonth()-p.getMonth();(ne<0||ne===0&&_.getDate()<p.getDate())&&c--}await qe(Be(Ee,"users",n.uid),{name:a(y),surname:a(f),birthdate:a(g),age:c,sex:a(o),phone:a(b),address:a(F),email:n.email,role:"Patient",createdAt:new Date().toISOString()}),l(k,"Account created successfully."),window.location.href="/login"}catch(e){e instanceof Error&&(e.message.includes("email-already-in-use")?l(w,"This email is already registered. Please use a different email."):e.message.includes("invalid-email")?l(w,"Invalid email format. Please enter a valid email address."):(l(w,"Something went wrong. Please try again."),console.error(e.message)),console.error(e.message))}finally{l(N,!1)}}Ne();var z=We(),Y=s(z),O=s(Y);Se(O);var j=t(O,4),q=s(j),$=s(q);v($),$.value=$.__value="Male";var M=t($,4);v(M),M.value=M.__value="Female",Me(2),r(q);var B=t(q,2),T=s(B);ce(T,{});var G=t(T,2);v(G),r(B);var E=t(B,2),J=s(E);ce(J,{});var Q=t(J,2);v(Q),r(E);var I=t(E,2);v(I);var L=t(I,2),V=s(L);Ce(V,{});var X=t(V,2);v(X),r(L);var Z=t(L,2),ee=s(Z);Ie(ee,{});var ae=t(ee,2);v(ae),r(Z);var C=t(Z,2),te=s(C);Le(te,{});var H=t(te,2);v(H),De(H,"pattern","^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]4$"),r(C);var S=t(C,2),se=s(S);Ze(se,{});var re=t(se,2);v(re),r(S);var K=t(S,2),he=s(K);{var xe=e=>{var n=Ke();u(e,n)},we=e=>{var n=Pe("Register");u(e,n)};R(he,e=>{a(N)?e(xe):e(we,!1)})}r(K);var le=t(K,4);{var ye=e=>{var n=Re(),c=s(n),p=s(c),_=s(p,!0);r(p),r(c),r(n),ie(()=>oe(_,a(w))),u(e,n)};R(le,e=>{a(w)&&e(ye)})}var $e=t(le,2);{var Ae=e=>{var n=Ue(),c=s(n),p=s(c),_=s(p,!0);r(p),r(c),r(n),ie(()=>oe(_,a(k))),u(e,n)};R($e,e=>{a(k)&&e(Ae)})}r(j),r(Y),r(z),de(x,[],$,()=>a(o),e=>l(o,e)),de(x,[],M,()=>a(o),e=>l(o,e)),h(G,()=>a(y),e=>l(y,e)),h(Q,()=>a(f),e=>l(f,e)),h(I,()=>a(g),e=>l(g,e)),h(X,()=>a(b),e=>l(b,e)),h(ae,()=>a(F),e=>l(F,e)),h(H,()=>a(P),e=>l(P,e)),h(re,()=>a(D),e=>l(D,e)),Fe("submit",j,ke(_e)),u(m,z),W()}export{da as component};
