const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/C6r7_MrR.js","../chunks/BUJsW1Et.js"])))=>i.map(i=>d[i]);
import{_ as V}from"../chunks/Dp1pzeXC.js";import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as st,g as e,a as rt,d,c as l,b as n,m as _,r as s,t as W,q as ot}from"../chunks/fyA_xwwE.js";import{e as Y,s as z}from"../chunks/DFa6dEAd.js";import{i as M}from"../chunks/CNHKDqpi.js";import{e as lt,i as it}from"../chunks/DRxKP6pH.js";import{t as m,a as u,b as nt}from"../chunks/DWMNOJpS.js";import{r as G,b as ct}from"../chunks/C5uBth1j.js";import{b as H}from"../chunks/B1v9Q_Xp.js";import{p as dt}from"../chunks/CWmzcjye.js";import{i as pt}from"../chunks/DUL5_GJ7.js";import{g as q}from"../chunks/BnRSOSMq.js";import{j as ut,k as ft,h as J,l as mt,d as vt,a as bt,b as _t}from"../chunks/C6r7_MrR.js";import{M as ht}from"../chunks/C7zT0Obj.js";import{K as gt}from"../chunks/CpQS5FxI.js";var xt=m('<a href="/" class="flex items-center justify-start w-full"><img src="/backbtn.png" alt="Back Button" class="backbtn w-8 h-8 mt-3 ml-3 hover:bg-[#FFFF] rounded-xl duration-300"></a>');function wt(w){var y=xt();u(w,y)}var yt=m('<span class="text-green-500">âœ“</span>'),Dt=m("<li><button> <!></button></li>"),Ft=m('<span class="loading loading-spinner text-neutral"></span>'),kt=m('<div class="toast"><div role="alert" class="alert alert-error alert-soft mt-4 text-white rounded-lg"><span> </span></div></div>'),Pt=m(`<div class="bg-[#181818] w-screen h-screen flex items-center justify-center overflow-hidden"><div class="login-card rounded-3xl bg-[#f7374f] flex flex-col items-center text-white svelte-yqnlg7"><!> <div class="flex flex-col items-center justify-center"><img src="/cloudward.png" alt="Logo" class="w-32 h-32 mb-5"> <h1 class="text-3xl text-white font-bold">CloudWard</h1> <p class="text-white text-sm mb-2">Login as:</p></div> <div class="menu menu-horizontal bg-[#181818] rounded-xl"></div> <form class="flex flex-col items-center justify-evenly h-full w-full px-4"><label class="input input-neutral"><!> <input class="text-white" type="text" placeholder="E-Mail"></label> <label class="input input-neutral"><!> <input class="text-white" type="password" placeholder="Password"></label> <button type="submit" class="btn btn-soft btn-info rounded-xl w-1/2 font-bold"><!></button> <div class="flex flex-col items-center"><p class="text-white text-sm">Don't have an account? <a href="/register" class="log-link font-bold text-[#181818] svelte-yqnlg7">Register</a></p> <p class="text-white text-sm">Forgot your password? <a href="/forgotpass" class="log-link font-bold text-[#181818] svelte-yqnlg7">Reset</a></p></div> <!></form></div></div>`);function Yt(w,y){st(y,!1);let h=_("");const N=["Patient","Admin","Doctor"];function Q(t){n(h,t)}let g=_(!1),v=_(""),D=_(""),F=_("");async function U(){n(g,!0),n(v,"");try{await ft(J,ut);const c=(await mt(J,e(D),e(F))).user.uid,r=vt(bt,"users",c),p=(await _t(r)).data();if(!p){n(v,"Invalid credentials. Please check your email and password."),n(g,!1);return}if(await V(async()=>{const{updateDoc:i}=await import("../chunks/C6r7_MrR.js").then(o=>o.p);return{updateDoc:i}},__vite__mapDeps([0,1]),import.meta.url).then(({updateDoc:i})=>i(r,{isActive:!0})),p.birthdate){const i=new Date(p.birthdate),o=new Date;let x=o.getFullYear()-i.getFullYear();const O=o.getMonth()-i.getMonth();(O<0||O===0&&o.getDate()<i.getDate())&&x--,await V(async()=>{const{updateDoc:L}=await import("../chunks/C6r7_MrR.js").then(at=>at.p);return{updateDoc:L}},__vite__mapDeps([0,1]),import.meta.url).then(({updateDoc:L})=>L(r,{age:x}))}const f=p.role;f===e(h)?f==="Admin"?q("/dashboard/admin"):f==="Patient"?q("/dashboard/patient"):f==="Doctor"&&q("/dashboard/doctor"):alert("Selected role doesn't match your account.")}catch(t){t instanceof Error&&n(v,"Invalid credentials. Please check your email and password.")}finally{n(g,!1)}}pt();var k=Pt(),I=l(k),S=l(I);wt(S);var P=d(S,4);lt(P,5,()=>N,it,(t,a)=>{var c=Dt(),r=l(c);let b;var p=l(r),f=d(p);{var i=o=>{var x=yt();u(o,x)};M(f,o=>{e(h)===e(a)&&o(i)})}s(r),s(c),W(o=>{b=ct(r,1,"flex justify-between",null,b,o),z(p,`${e(a)??""} `)},[()=>({active:e(h)===e(a)})],ot),Y("click",r,()=>Q(e(a))),u(t,c)}),s(P);var R=d(P,2),E=l(R),T=l(E);ht(T,{color:"#FFFF"});var C=d(T,2);G(C),s(E);var j=d(E,2),B=l(j);gt(B,{color:"#FFFF"});var K=d(B,2);G(K),s(j);var A=d(j,2),X=l(A);{var Z=t=>{var a=Ft();u(t,a)},$=t=>{var a=nt("Login");u(t,a)};M(X,t=>{e(g)?t(Z):t($,!1)})}s(A);var tt=d(A,4);{var et=t=>{var a=kt(),c=l(a),r=l(c),b=l(r,!0);s(r),s(c),s(a),W(()=>z(b,e(v))),u(t,a)};M(tt,t=>{e(v)&&t(et)})}s(R),s(I),s(k),H(C,()=>e(D),t=>n(D,t)),H(K,()=>e(F),t=>n(F,t)),Y("submit",R,dt(U)),u(w,k),rt()}export{Yt as component};
