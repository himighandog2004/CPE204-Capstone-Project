import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as V,t as R,g as a,a as X,c as r,d as l,b as t,m as n,r as o,n as Z}from"../chunks/7rSjAqwL.js";import{e as $,s as k}from"../chunks/CZq_rD3P.js";import{i as j}from"../chunks/BuTimael.js";import{t as x,a as p,b as ee}from"../chunks/VPhd0wVP.js";import{r as T}from"../chunks/DNYWoyz_.js";import{b as U}from"../chunks/CeqDkE_D.js";import{i as se}from"../chunks/xGIyzegC.js";import{o as te}from"../chunks/BKaElybV.js";import{v as ae,i as re,h as W}from"../chunks/D746TuBs.js";import{K as Y}from"../chunks/D-hZwQpL.js";var oe=x('<span class="loading loading-spinner text-neutral"></span>'),ie=x('<div class="toast toast-end mt-4"><div class="alert alert-error"><span> </span></div></div>'),le=x('<div class="toast toast-end mt-4"><div class="alert alert-success"><span> </span></div></div>'),ne=x('<div class="flex flex-col justify-center items-center w-screen h-screen bg-[#181818]"><div class="w-100 h-auto bg-[#f7374f] rounded-3xl text-white p-6"><div class="flex flex-row items-start justify-start"><img src="/cloudward.png" alt="Logo" class="w-12 h-12 mt-3 ml-3"> <h1 class="text-3xl text-white font-bold mt-4 ml-2">CloudWard</h1></div> <div class="flex flex-col items-center justify-center mt-5"><fieldset class="bg-[#181818] border-[#181818] rounded-box border p-4 w-80"><p class="text-white text-base">Reset Password</p> <p class="text-white text-base font-bold break-all"> </p> <label class="input input-bordered bg-[#181818] mt-3 flex items-center gap-2"><!> <input class="text-white w-full bg-transparent outline-none" type="password" placeholder="Password"></label> <label class="input input-bordered bg-[#181818] mt-3 flex items-center gap-2"><!> <input class="text-white w-full bg-transparent outline-none" type="password" placeholder="Confirm Password"></label> <button type="button" class="btn btn-soft btn-success mt-3 gap-2"><!></button></fieldset> <!> <!></div> <div class="flex flex-row items-center justify-center space-x-3 mt-5"></div></div></div>');function he(z,A){V(A,!1);let d=n(""),f=n(""),C=n(""),i=n(""),m=n(""),u=n(!1),b="";te(()=>{if(b=new URLSearchParams(window.location.search).get("oobCode")??"",!b){t(i,"Invalid or missing reset code.");return}ae(W,b).then(s=>{t(C,s)}).catch(s=>{t(i,"Reset link is invalid or has expired."),console.error(s)})});async function B(){if(!a(d)||!a(f)){t(i,"Please fill in all fields.");return}if(a(d)!==a(f)){t(i,"Passwords do not match.");return}t(u,!0),t(i,""),t(m,"");try{await re(W,b,a(d)),t(m,"Password reset successful! You can now log in."),setTimeout(()=>{window.location.href="/login"},1500)}catch(e){e instanceof Error&&(e.message.includes("expired")?t(i,"Reset link has expired. Please request a new one."):e.message.includes("invalid")?t(i,"Invalid reset code. Please try again."):t(i,e.message))}finally{t(u,!1)}}se();var g=ne(),L=r(g),M=l(r(L),2),_=r(M),h=l(r(_),2),D=r(h);o(h);var P=l(h,2),I=r(P);Y(I,{color:"#FFFF"});var K=l(I,2);T(K),o(P);var y=l(P,2),q=r(y);Y(q,{color:"#FFFF"});var E=l(q,2);T(E),o(y);var w=l(y,2),G=r(w);{var H=e=>{var s=oe();p(e,s)},J=e=>{var s=ee("Reset Password");p(e,s)};j(G,e=>{a(u)?e(H):e(J,!1)})}o(w),o(_);var S=l(_,2);{var N=e=>{var s=ie(),c=r(s),v=r(c),F=r(v,!0);o(v),o(c),o(s),R(()=>k(F,a(i))),p(e,s)};j(S,e=>{a(i)&&e(N)})}var O=l(S,2);{var Q=e=>{var s=le(),c=r(s),v=r(c),F=r(v,!0);o(v),o(c),o(s),R(()=>k(F,a(m))),p(e,s)};j(O,e=>{a(m)&&e(Q)})}o(M),Z(2),o(L),o(g),R(()=>{k(D,`for: ${a(C)??""}`),w.disabled=a(u)}),U(K,()=>a(d),e=>t(d,e)),U(E,()=>a(f),e=>t(f,e)),$("click",w,B),p(z,g),X()}export{he as component};
