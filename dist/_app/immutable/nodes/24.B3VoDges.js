const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CLR_ZPnl.js","../chunks/BUJsW1Et.js"])))=>i.map(i=>d[i]);
import{_ as O}from"../chunks/Dp1pzeXC.js";import{t as m,a as f,b as se}from"../chunks/OnU_l3An.js";import"../chunks/BsN24l2h.js";import{p as re,o as t,a as oe,j as d,k as l,s as n,m as _,r as s,t as V,q as le}from"../chunks/FB_gRupF.js";import{e as W,s as Y}from"../chunks/BkxHr61Q.js";import{i as M}from"../chunks/BydVSvHb.js";import{e as ie,i as ne}from"../chunks/BWNo7gSO.js";import{r as G}from"../chunks/B5V6kkOL.js";import{s as ce}from"../chunks/CjvYOB0v.js";import{b as H}from"../chunks/D4IycTRD.js";import{p as de}from"../chunks/BDD76Zze.js";import{i as ue}from"../chunks/0NZHIKlb.js";import{g as q}from"../chunks/9ZZxbyp2.js";import{x as fe,y as pe,m as J,z as me,e as ve,d as be,f as _e}from"../chunks/CLR_ZPnl.js";import{M as he}from"../chunks/BaS8lBGe.js";import{K as ge}from"../chunks/B03M6ls5.js";var xe=m('<a href="/" class="flex items-center justify-start w-full"><img src="/backbtn.png" alt="Back Button" class="backbtn w-8 h-8 mt-3 ml-3 hover:bg-[#FFFF] rounded-xl duration-300"></a>');function we(w){var y=xe();f(w,y)}var ye=m('<span class="text-green-500">âœ“</span>'),De=m("<li><button> <!></button></li>"),Fe=m('<span class="loading loading-spinner text-neutral"></span>'),ke=m('<div class="toast"><div role="alert" class="alert alert-error alert-soft mt-4 text-white rounded-lg"><span> </span></div></div>'),Pe=m(`<div class="bg-[#181818] w-screen h-screen flex items-center justify-center overflow-hidden"><div class="login-card rounded-3xl bg-[#f7374f] flex flex-col items-center text-white svelte-yqnlg7"><!> <div class="flex flex-col items-center justify-center"><img src="/cloudward.png" alt="Logo" class="w-32 h-32 mb-5"> <h1 class="text-3xl text-white font-bold">CloudWard</h1> <p class="text-white text-sm mb-2">Login as:</p></div> <div class="menu menu-horizontal bg-[#181818] rounded-xl"></div> <form class="flex flex-col items-center justify-evenly h-full w-full px-4"><label class="input input-neutral"><!> <input class="text-white" type="text" placeholder="E-Mail"></label> <label class="input input-neutral"><!> <input class="text-white" type="password" placeholder="Password"></label> <button type="submit" class="btn btn-soft btn-info rounded-xl w-1/2 font-bold"><!></button> <div class="flex flex-col items-center"><p class="text-white text-sm">Don't have an account? <a href="/register" class="log-link font-bold text-[#181818] svelte-yqnlg7">Register</a></p> <p class="text-white text-sm">Forgot your password? <a href="/forgotpass" class="log-link font-bold text-[#181818] svelte-yqnlg7">Reset</a></p></div> <!></form></div></div>`);function We(w,y){re(y,!1);let h=_("");const N=["Patient","Admin","Doctor"];function Q(e){n(h,e)}let g=_(!1),v=_(""),D=_(""),F=_("");async function U(){n(g,!0),n(v,"");try{await pe(J,fe);const c=(await me(J,t(D),t(F))).user.uid,r=ve(be,"users",c),u=(await _e(r)).data();if(!u){n(v,"Invalid credentials. Please check your email and password."),n(g,!1);return}if(await O(async()=>{const{updateDoc:i}=await import("../chunks/CLR_ZPnl.js").then(o=>o.A);return{updateDoc:i}},__vite__mapDeps([0,1]),import.meta.url).then(({updateDoc:i})=>i(r,{isActive:!0})),u.birthdate){const i=new Date(u.birthdate),o=new Date;let x=o.getFullYear()-i.getFullYear();const K=o.getMonth()-i.getMonth();(K<0||K===0&&o.getDate()<i.getDate())&&x--,await O(async()=>{const{updateDoc:L}=await import("../chunks/CLR_ZPnl.js").then(ae=>ae.A);return{updateDoc:L}},__vite__mapDeps([0,1]),import.meta.url).then(({updateDoc:L})=>L(r,{age:x}))}const p=u.role;p===t(h)?p==="Admin"?q("/dashboard/admin"):p==="Patient"?q("/dashboard/patient"):p==="Doctor"&&q("/dashboard/doctor"):alert("Selected role doesn't match your account.")}catch(e){e instanceof Error&&n(v,"Invalid credentials. Please check your email and password.")}finally{n(g,!1)}}ue();var k=Pe(),I=l(k),S=l(I);we(S);var P=d(S,4);ie(P,5,()=>N,ne,(e,a)=>{var c=De(),r=l(c);let b;var u=l(r),p=d(u);{var i=o=>{var x=ye();f(o,x)};M(p,o=>{t(h)===t(a)&&o(i)})}s(r),s(c),V(o=>{b=ce(r,1,"flex justify-between",null,b,o),Y(u,`${t(a)??""} `)},[()=>({active:t(h)===t(a)})],le),W("click",r,()=>Q(t(a))),f(e,c)}),s(P);var A=d(P,2),R=l(A),T=l(R);he(T,{color:"#FFFF"});var C=d(T,2);G(C),s(R);var E=d(R,2),z=l(E);ge(z,{color:"#FFFF"});var B=d(z,2);G(B),s(E);var j=d(E,2),X=l(j);{var Z=e=>{var a=Fe();f(e,a)},$=e=>{var a=se("Login");f(e,a)};M(X,e=>{t(g)?e(Z):e($,!1)})}s(j);var ee=d(j,4);{var te=e=>{var a=ke(),c=l(a),r=l(c),b=l(r,!0);s(r),s(c),s(a),V(()=>Y(b,t(v))),f(e,a)};M(ee,e=>{t(v)&&e(te)})}s(A),s(I),s(k),H(C,()=>t(D),e=>n(D,e)),H(B,()=>t(F),e=>n(F,e)),W("submit",A,de(U)),f(w,k),oe()}export{We as component};
