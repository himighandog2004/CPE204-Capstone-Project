import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as X,t as R,g as o,a as Z,c as a,s as l,d as t,m as n,b as r}from"../chunks/B4yUTaZg.js";import{s as k}from"../chunks/BorGIr2d.js";import{i as j}from"../chunks/IJ79yAtH.js";import{t as x,a as p,b as $}from"../chunks/CO_T4kFq.js";import{r as U}from"../chunks/CnpYhvpb.js";import{e as ee}from"../chunks/1W6vjebl.js";import{b as W,v as se,c as ae,a as Y}from"../chunks/C848jhzL.js";import{i as te}from"../chunks/BTQRHe9S.js";import{o as re}from"../chunks/C-LMDs07.js";import{K as z}from"../chunks/E4jfsbhi.js";var oe=x('<div class="toast toast-end mt-4"><div class="alert alert-error"><span> </span></div></div>'),ie=x('<div class="toast toast-end mt-4"><div class="alert alert-success"><span> </span></div></div>'),le=x('<span class="loading loading-spinner text-neutral"></span>'),ne=x('<div class="flex flex-col justify-center items-center w-screen h-screen bg-[#181818]"><div class="w-150 h-auto bg-[#f7374f] rounded-3xl text-white p-6"><div class="flex flex-row items-start justify-start"><img src="/cloudward.png" alt="Logo" class="w-12 h-12 mt-3 ml-3"> <h1 class="text-3xl text-white font-bold mt-4 ml-2">CloudWard</h1></div> <div class="flex flex-col items-center justify-center mt-5"><fieldset class="bg-[#181818] border-[#181818] rounded-box border p-4 w-80"><p class="text-white text-base">Reset Password</p> <p class="text-white text-base font-bold break-all"> </p> <label class="input input-bordered bg-[#181818] mt-3 flex items-center gap-2"><!> <input class="text-white w-full bg-transparent outline-none" type="password" placeholder="Password"></label> <label class="input input-bordered bg-[#181818] mt-3 flex items-center gap-2"><!> <input class="text-white w-full bg-transparent outline-none" type="password" placeholder="Confirm Password"></label></fieldset> <!> <!></div> <div class="flex flex-row items-center justify-center space-x-3 mt-5"><button type="button" class="btn bg-[#181818]"><!></button></div></div></div>');function he(A,B){X(B,!1);let d=n(""),f=n(""),C=n(""),i=n(""),m=n(""),u=n(!1),b="";re(()=>{if(b=new URLSearchParams(window.location.search).get("oobCode")??"",!b){t(i,"Invalid or missing reset code.");return}se(Y,b).then(s=>{t(C,s)}).catch(s=>{t(i,"Reset link is invalid or has expired."),console.error(s)})});async function D(){if(!o(d)||!o(f)){t(i,"Please fill in all fields.");return}if(o(d)!==o(f)){t(i,"Passwords do not match.");return}t(u,!0),t(i,""),t(m,"");try{await ae(Y,b,o(d)),t(m,"Password reset successful! You can now log in."),setTimeout(()=>{window.location.href="/login"},1500)}catch(e){e instanceof Error&&(e.message.includes("expired")?t(i,"Reset link has expired. Please request a new one."):e.message.includes("invalid")?t(i,"Invalid reset code. Please try again."):t(i,e.message))}finally{t(u,!1)}}te();var g=ne(),L=a(g),_=l(a(L),2),h=a(_),P=l(a(h),2),G=a(P);r(P);var y=l(P,2),M=a(y);z(M,{color:"#FFFF"});var I=l(M,2);U(I),r(y);var K=l(y,2),q=a(K);z(q,{color:"#FFFF"});var E=l(q,2);U(E),r(K),r(h);var S=l(h,2);{var H=e=>{var s=oe(),c=a(s),v=a(c),F=a(v,!0);r(v),r(c),r(s),R(()=>k(F,o(i))),p(e,s)};j(S,e=>{o(i)&&e(H)})}var J=l(S,2);{var N=e=>{var s=ie(),c=a(s),v=a(c),F=a(v,!0);r(v),r(c),r(s),R(()=>k(F,o(m))),p(e,s)};j(J,e=>{o(m)&&e(N)})}r(_);var T=l(_,2),w=a(T),O=a(w);{var Q=e=>{var s=le();p(e,s)},V=e=>{var s=$("Reset Password");p(e,s)};j(O,e=>{o(u)?e(Q):e(V,!1)})}r(w),r(T),r(L),r(g),R(()=>{k(G,`for: ${o(C)??""}`),w.disabled=o(u)}),W(I,()=>o(d),e=>t(d,e)),W(E,()=>o(f),e=>t(f,e)),ee("click",w,D),p(A,g),Z()}export{he as component};
