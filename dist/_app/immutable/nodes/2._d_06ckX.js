const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CLR_ZPnl.js","../chunks/BUJsW1Et.js"])))=>i.map(i=>d[i]);
import{_ as B}from"../chunks/Dp1pzeXC.js";import{c as I,a as u,t as y}from"../chunks/OnU_l3An.js";import"../chunks/BsN24l2h.js";import{p as N,f as S,n as ra,a as j,aE as x,s as F,m as G,o as J,k as t,r as s,l as c,j as b}from"../chunks/FB_gRupF.js";import{e as K}from"../chunks/BkxHr61Q.js";import{i as ba}from"../chunks/BydVSvHb.js";import{s as ga}from"../chunks/pRhuVPOZ.js";import{i as ya}from"../chunks/0NZHIKlb.js";import{o as wa}from"../chunks/SaxHpMRh.js";import{w as D}from"../chunks/Q9qv183y.js";import{j as W,i as $a,e as X,d as g,f as Pa,q as Y,c as Z,w as aa,g as ta,t as xa}from"../chunks/CLR_ZPnl.js";import{p as sa,_ as Aa,L as ea}from"../chunks/DGx0nqGt.js";import{_ as Ma}from"../chunks/ByvHsynI.js";import{p as La,d as Ra}from"../chunks/Clgg6vcR.js";import{H as ka}from"../chunks/CPiiS2pq.js";import{I as ia,s as na}from"../chunks/CE2TyP2S.js";import{s as la,r as da}from"../chunks/B8bBJGzH.js";import{R as Da}from"../chunks/BjeTbLjS.js";import{M as Ia}from"../chunks/C7gGuUmw.js";function Na(h,l){N(l,!0);let v=da(l,["$$slots","$$events","$$legacy"]);ia(h,la({name:"package"},()=>v,{iconNode:[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]],children:(f,w)=>{var m=I(),_=S(m);na(_,()=>l.children??ra),u(f,m)},$$slots:{default:!0}})),j()}function Sa(h,l){N(l,!0);let v=da(l,["$$slots","$$events","$$legacy"]);ia(h,la({name:"users"},()=>v,{iconNode:[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["circle",{cx:"9",cy:"7",r:"4"}]],children:(f,w)=>{var m=I(),_=S(m);na(_,()=>l.children??ra),u(f,m)},$$slots:{default:!0}})),j()}const oa=D([]);var ja=y('<div class="w-screen min-h-screen flex items-center justify-center"><!></div>'),za=y('<div slot="sidebar"><div class="flex flex-col items-start justify-start pl-1 font-extrabold"><ul class="menu w-full text-lg space-y-2"><li><a href="/dashboard/admin"><!> Home</a></li> <li><details open><summary><img src="/bed-pulse-solid.png" class="w-6 h-5" alt="patient"> Patient Records</summary> <ul class="text-base w-50"><li><a href="/dashboard/admin/sidebar/patientlist">Patient List</a></li> <li><a href="/dashboard/admin/sidebar/appointments">Appointments</a></li></ul></details></li> <li><details open><summary><!> Staff Management</summary> <ul class="text-base w-50"><li><a href="/dashboard/admin/sidebar/doctorslist">Manage/Add Doctors</a></li></ul></details></li> <li><details open><summary><!> Inventory</summary> <ul class="text-base w-50"><li><a href="/dashboard/admin/sidebar/pharmacy">Pharmacy</a></li></ul></details></li> <li><a href="/dashboard/admin/sidebar/listbill"><!> Billing Overview</a></li> <li><a href="/dashboard/admin/sidebar/lab"><!> Lab Integration</a></li> <li class="pt-4 mt-18 "><button class="btn btn-soft btn-info w-full flex items-center gap-2"><!> Logout</button></li></ul></div></div>'),Ea=y('<div slot="navbar"></div>'),Ca=y('<div slot="dropdown"><li><button><!>Logout</button></li></div>'),Ha=y('<div slot="main" class="w-full"><!></div>');function ot(h,l){N(l,!1);let v=G(""),A="https://static.vecteezy.com/system/resources/thumbnails/008/442/086/small_2x/illustration-of-human-icon-user-symbol-icon-modern-design-on-blank-background-free-vector.jpg",f=G(!0),w=[],m=[],_=D("");const z=D([]);x("patients",sa),x("userName",_),x("appointments",oa),x("doctors",z),wa(()=>{const i=W();$a(i,async e=>{if(!e){window.location.href="/login";return}try{const r=X(g,"users",e.uid),a=(await Pa(r)).data();F(v,(a==null?void 0:a.role)||""),_.set(((a==null?void 0:a.name)||"")+(a!=null&&a.surname?" "+a.surname:""));const p=Y(Z(g,"users"),aa("role","==","Patient")),d=await ta(p);console.log("Patient docs found:",d.size,d.docs.map(n=>n.data())),La.set(d.size),w=d.docs.map(n=>({id:n.id,...n.data()})),sa.set(w);const $=Y(Z(g,"users"),aa("role","==","Doctor")),P=await ta($);Ra.set(P.size),m=P.docs.map(n=>({id:n.id,...n.data()})),z.set(m)}catch(r){console.error("Failed to load patient count:",r)}finally{F(f,!1)}}),B(()=>import("../chunks/CLR_ZPnl.js").then(e=>e.A),__vite__mapDeps([0,1]),import.meta.url).then(async({collection:e,getDocs:r})=>{const o=await r(e(g,"appointments"));oa.set(o.docs.map(a=>({id:a.id,...a.data()})))})});function E(){const i=W(),e=i.currentUser;if(e){const r=X(g,"users",e.uid);B(async()=>{const{updateDoc:o}=await import("../chunks/CLR_ZPnl.js").then(a=>a.A);return{updateDoc:o}},__vite__mapDeps([0,1]),import.meta.url).then(({updateDoc:o})=>{o(r,{isActive:!1})})}xa(i).then(()=>{window.location.href="/login"})}ya();var C=I(),ca=S(C);{var ma=i=>{var e=ja(),r=t(e);Ma(r),s(e),u(i,e)},pa=i=>{Aa(i,{avatarUrl:A,get selectedRole(){return J(v)},$$slots:{sidebar:(e,r)=>{var o=za(),a=t(o),p=t(a),d=t(p),$=t(d),P=t($);ka(P,{}),c(),s($),s(d);var n=b(d,4),H=t(n),O=t(H),ua=t(O);Sa(ua,{}),c(),s(O),c(2),s(H),s(n);var M=b(n,2),V=t(M),q=t(V),va=t(q);Na(va,{}),c(),s(q),c(2),s(V),s(M);var L=b(M,2),U=t(L),fa=t(U);Da(fa,{}),c(),s(U),s(L);var R=b(L,2),Q=t(R),_a=t(Q);Ia(_a,{}),c(),s(Q),s(R);var T=b(R,2),k=t(T),ha=t(k);ea(ha,{}),c(),s(k),s(T),s(p),s(a),s(o),K("click",k,E),u(e,o)},navbar:(e,r)=>{var o=Ea();u(e,o)},dropdown:(e,r)=>{var o=Ca(),a=t(o),p=t(a),d=t(p);ea(d,{}),c(),s(p),s(a),s(o),K("click",p,E),u(e,o)},main:(e,r)=>{var o=Ha(),a=t(o);ga(a,l,"default",{}),s(o),u(e,o)}}})};ba(ca,i=>{J(f)?i(ma):i(pa,!1)})}u(h,C),j()}export{ot as component};
