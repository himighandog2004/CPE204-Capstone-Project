import{t as E,a as S,c as tt}from"../chunks/OnU_l3An.js";import"../chunks/BsN24l2h.js";import{p as et,o as t,a as at,j as i,k as c,s as Q,m as R,w as u,r as o,f as st,t as rt}from"../chunks/FB_gRupF.js";import{e as q,s as b}from"../chunks/BkxHr61Q.js";import{i as it}from"../chunks/BydVSvHb.js";import{e as ot,i as ct}from"../chunks/BWNo7gSO.js";import{r as m}from"../chunks/B5V6kkOL.js";import{b as l}from"../chunks/D4IycTRD.js";import{i as nt}from"../chunks/0NZHIKlb.js";import{s as dt,a as pt}from"../chunks/CyREyv4c.js";import{o as mt}from"../chunks/SaxHpMRh.js";import{w as lt,g as ut}from"../chunks/Q9qv183y.js";import{g as bt,c as z,d as v,u as vt,e as B,h as yt,b as ft}from"../chunks/CLR_ZPnl.js";var _t=E('<tr style="display: table; width: 100%; table-layout: fixed;"><td> </td><td> </td><td> </td><td> </td><td><button class="btn btn-xs btn-error">Delete</button></td></tr>'),gt=E('<div class="p-5 pt-2"><h1 class="text-3xl text-blue-600">Pharmacy Inventory</h1> <input type="text" placeholder="Search medicine..." class="input input-sm my-2"> <div class="w-full h-75 overflow-x-auto"><table class="table table-sm table-bordered w-full"><tbody style="max-height: 300px; overflow-y: auto; display: block; width: 100%"></tbody></table></div> <div class="p-4 bg-[#2c2c2c] rounded-xl mt-4"><h2 class="text-lg">Add New Medicine</h2> <input type="text" placeholder="Name" class="input input-sm my-2"> <input type="text" placeholder="Category" class="input input-sm my-2"> <input type="number" placeholder="Stock" class="input input-sm my-2"> <input type="number" placeholder="Price" class="input input-sm my-2"> <button class="btn btn-success mt-2">Add Medicine</button></div></div>');function jt(F,G){et(G,!1);const[H,J]=dt(),K=()=>pt(n,"$medicines",H);let n=lt([]),y=R(""),e=R({name:"",category:"",stock:0,price:0});mt(async()=>{const a=await bt(z(v,"medicines"));n.set(a.docs.map(s=>({id:s.id,...s.data()})))});async function O(){if(!t(e).name||!t(e).category)return;const s=ut(n).find(r=>r.name&&r.category&&r.name.trim().toLowerCase()===t(e).name.trim().toLowerCase()&&r.category.trim().toLowerCase()===t(e).category.trim().toLowerCase());if(s){const r=Number(s.stock)+Number(t(e).stock);await vt(B(v,"medicines",s.id),{stock:r}),n.update(d=>d.map(p=>p.id===s.id?{...p,stock:r}:p))}else{const r=await yt(z(v,"medicines"),{name:t(e).name,category:t(e).category,stock:Number(t(e).stock),price:Number(t(e).price)});n.update(d=>[...d,{id:r.id,...t(e),stock:Number(t(e).stock),price:Number(t(e).price)}])}Q(e,{name:"",category:"",stock:0,price:0})}async function T(a){await ft(B(v,"medicines",a)),n.update(s=>s.filter(r=>r.id!==a))}nt();var f=gt(),_=i(c(f),2);m(_);var g=i(_,2),A=c(g),P=c(A);ot(P,5,K,ct,(a,s)=>{var r=tt(),d=st(r);{var p=$=>{var N=_t(),C=c(N),V=c(C,!0);o(C);var L=i(C),W=c(L,!0);o(L);var M=i(L),X=c(M,!0);o(M);var D=i(M),Y=c(D);o(D);var I=i(D),Z=c(I);o(I),o(N),rt(()=>{b(V,t(s).name),b(W,t(s).category),b(X,t(s).stock),b(Y,`â‚±${t(s).price??""}`)}),q("click",Z,()=>T(t(s).id)),S($,N)};it(d,$=>{t(s).name.toLowerCase().includes(t(y).toLowerCase())&&$(p)})}S(a,r)}),o(P),o(A),o(g);var j=i(g,2),h=i(c(j),2);m(h);var w=i(h,2);m(w);var k=i(w,2);m(k);var x=i(k,2);m(x);var U=i(x,2);o(j),o(f),l(_,()=>t(y),a=>Q(y,a)),l(h,()=>t(e).name,a=>u(e,t(e).name=a)),l(w,()=>t(e).category,a=>u(e,t(e).category=a)),l(k,()=>t(e).stock,a=>u(e,t(e).stock=a)),l(x,()=>t(e).price,a=>u(e,t(e).price=a)),q("click",U,O),S(F,f),at(),J()}export{jt as component};
