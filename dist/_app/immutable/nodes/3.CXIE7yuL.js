const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CLR_ZPnl.js","../chunks/BUJsW1Et.js"])))=>i.map(i=>d[i]);
import{_ as ia}from"../chunks/Dp1pzeXC.js";import{c as A,a as p,t as b}from"../chunks/OnU_l3An.js";import"../chunks/BsN24l2h.js";import{p as L,f as k,n as K,a as H,aE as q,s as E,m as O,o as Q,k as t,r as s,l as u,j as P}from"../chunks/FB_gRupF.js";import{e as na}from"../chunks/BkxHr61Q.js";import{i as la}from"../chunks/BydVSvHb.js";import{s as da}from"../chunks/pRhuVPOZ.js";import{i as ca}from"../chunks/0NZHIKlb.js";import{o as ma}from"../chunks/SaxHpMRh.js";import{w as ua}from"../chunks/Q9qv183y.js";import{j as T,i as pa,e as U,d as w,f as va,q as V,c as B,w as F,g as G,t as fa}from"../chunks/CLR_ZPnl.js";import{p as J,_ as ha,L as _a}from"../chunks/DGx0nqGt.js";import{_ as ba}from"../chunks/ByvHsynI.js";import{p as ya,d as ga}from"../chunks/Clgg6vcR.js";import{H as wa}from"../chunks/CPiiS2pq.js";import{I as W,s as X}from"../chunks/CE2TyP2S.js";import{s as Y,r as Z}from"../chunks/B8bBJGzH.js";import{M as $a}from"../chunks/C7gGuUmw.js";function Ma(h,n){L(n,!0);let v=Z(n,["$$slots","$$events","$$legacy"]);W(h,Y({name:"book-user"},()=>v,{iconNode:[["path",{d:"M15 13a3 3 0 1 0-6 0"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}],["circle",{cx:"12",cy:"8",r:"2"}]],children:(f,y)=>{var d=A(),_=k(d);X(_,()=>n.children??K),p(f,d)},$$slots:{default:!0}})),H()}function xa(h,n){L(n,!0);let v=Z(n,["$$slots","$$events","$$legacy"]);W(h,Y({name:"calendar-days"},()=>v,{iconNode:[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}],["path",{d:"M8 14h.01"}],["path",{d:"M12 14h.01"}],["path",{d:"M16 14h.01"}],["path",{d:"M8 18h.01"}],["path",{d:"M12 18h.01"}],["path",{d:"M16 18h.01"}]],children:(f,y)=>{var d=A(),_=k(d);X(_,()=>n.children??K),p(f,d)},$$slots:{default:!0}})),H()}var Pa=b('<div class="w-screen min-h-screen flex items-center justify-center"><!></div>'),Aa=b('<div slot="sidebar"><div class="flex flex-col items-start justify-start pl-1 font-extrabold"><ul class="menu w-full text-lg space-y-2"><li><a href="/dashboard/doctor"><!> Home</a></li> <li><details open><summary><!> Appointment List</summary> <ul class="text-base"><li><a href="/dashboard/doctor/sidebar/Appointmentlist">View Appointments</a></li></ul></details></li> <li><details open><summary><!> Patients</summary> <ul class="text-base"><li><a href="/dashboard/doctor/sidebar/Mpatient">Manage Patients</a></li></ul></details></li> <li><details open><summary><!> Lab Integration</summary> <ul class="text-base"><li><a href="/dashboard/doctor/sidebar/laborder">Order Lab Test</a></li></ul></details></li></ul></div></div>'),La=b('<div slot="navbar"></div>'),ka=b('<div slot="dropdown"><li><button><!>Logout</button></li></div>'),Ha=b('<div slot="main" class="w-full"><!></div>');function Ja(h,n){L(n,!1);let v=O(""),$="https://static.vecteezy.com/system/resources/thumbnails/008/442/086/small_2x/illustration-of-human-icon-user-symbol-icon-modern-design-on-blank-background-free-vector.jpg",f=O(!0),y=[],d=ua("");q("patients",J),q("userName",d),ma(()=>{const r=T();pa(r,async o=>{if(!o){window.location.href="/login";return}try{const i=U(w,"users",o.uid),a=(await va(i)).data();E(v,(a==null?void 0:a.role)||""),d.set(((a==null?void 0:a.name)||"")+(a!=null&&a.surname?" "+a.surname:""));const c=V(B(w,"users"),F("role","==","Patient")),l=await G(c);console.log("Patient docs found:",l.size,l.docs.map(m=>m.data())),ya.set(l.size),y=l.docs.map(m=>({id:m.id,...m.data()})),J.set(y);const g=V(B(w,"users"),F("role","==","Doctor")),M=await G(g);ga.set(M.size)}catch(i){console.error("Failed to load patient count:",i)}finally{E(f,!1)}})});function _(){const r=T(),o=r.currentUser;if(o){const i=U(w,"users",o.uid);ia(async()=>{const{updateDoc:e}=await import("../chunks/CLR_ZPnl.js").then(a=>a.A);return{updateDoc:e}},__vite__mapDeps([0,1]),import.meta.url).then(({updateDoc:e})=>{e(i,{isActive:!1})})}fa(r).then(()=>{window.location.href="/login"})}ca();var N=A(),aa=k(N);{var ta=r=>{var o=Pa(),i=t(o);ba(i),s(o),p(r,o)},sa=r=>{ha(r,{avatarUrl:$,get selectedRole(){return Q(v)},$$slots:{sidebar:(o,i)=>{var e=Aa(),a=t(e),c=t(a),l=t(c),g=t(l),M=t(g);wa(M,{}),u(),s(g),s(l);var m=P(l,2),j=t(m),C=t(j),ea=t(C);xa(ea,{}),u(),s(C),u(2),s(j),s(m);var x=P(m,2),D=t(x),R=t(D),oa=t(R);Ma(oa,{}),u(),s(R),u(2),s(D),s(x);var z=P(x,2),I=t(z),S=t(I),ra=t(S);$a(ra,{}),u(),s(S),u(2),s(I),s(z),s(c),s(a),s(e),p(o,e)},navbar:(o,i)=>{var e=La();p(o,e)},dropdown:(o,i)=>{var e=ka(),a=t(e),c=t(a),l=t(c);_a(l,{}),u(),s(c),s(a),s(e),na("click",c,_),p(o,e)},main:(o,i)=>{var e=Ha(),a=t(e);da(a,n,"default",{}),s(e),p(o,e)}}})};la(aa,r=>{Q(f)?r(ta):r(sa,!1)})}p(h,N),H()}export{Ja as component};
