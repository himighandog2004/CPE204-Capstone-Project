import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{e as P,i as M,f as T,w as G,j as s,s as t,g as a,m as d,k as l,n as Ae,r,t as pe}from"../chunks/B3JB-DRe.js";import{a as J,r as O,e as Pe,s as me}from"../chunks/CENfdUkR.js";import{i as S}from"../chunks/ohbgY07t.js";import{c as Q,a as m,t as $,b as Me}from"../chunks/Ds1YGPe8.js";import{I as V,a as Ne,r as p}from"../chunks/Bjcyuno3.js";import{a as fe,b as g}from"../chunks/Zbet6IEB.js";import{p as ke}from"../chunks/CWmzcjye.js";import{i as ze}from"../chunks/DM5D0Smv.js";import{h as Fe,e as je,i as qe,d as Ee,b as Le}from"../chunks/DZ5ynwgK.js";import{s as X}from"../chunks/tf-bJHW8.js";import{M as Ze}from"../chunks/Bzt0cYpm.js";import{K as Be}from"../chunks/xun7GkkK.js";function Ce(c,n){P(n,!0);let f=O(n,["$$slots","$$events","$$legacy"]);V(c,J({name:"house"},()=>f,{iconNode:[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]],children:(v,_)=>{var i=Q(),u=T(i);X(u,()=>n.children??G),m(v,i)},$$slots:{default:!0}})),M()}function He(c,n){P(n,!0);let f=O(n,["$$slots","$$events","$$legacy"]);V(c,J({name:"phone"},()=>f,{iconNode:[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}]],children:(v,_)=>{var i=Q(),u=T(i);X(u,()=>n.children??G),m(v,i)},$$slots:{default:!0}})),M()}function ge(c,n){P(n,!0);let f=O(n,["$$slots","$$events","$$legacy"]);V(c,J({name:"user"},()=>f,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(v,_)=>{var i=Q(),u=T(i);X(u,()=>n.children??G),m(v,i)},$$slots:{default:!0}})),M()}var Ie=$('<a href="/" class="flex items-center justify-start w-full"><img src="/backbtn.png" alt="Back Button" class="backbtn w-8 h-8 mt-15 ml-3 hover:bg-[#FFFF] rounded-xl duration-300 svelte-iosgd9"></a>');function De(c){var n=Ie();m(c,n)}var Ke=$('<span class="loading loading-spinner text-neutral"></span>'),Re=$('<div class="toast toast-end"><div role="alert" class="alert alert-error alert-soft mt-4 text-white rounded-lg"><span> </span></div></div>'),Ue=$('<div class="toast toast-end"><div class="alert alert-success alert-soft mt-4 text-white rounded-lg"><span> </span></div></div>'),We=$(`<div class="bg-[#181818] w-screen h-screen flex flex-col items-center justify-center"><div class="register-card rounded-3xl bg-[#f7374f] flex flex-col justify-center items-center w-[25%] pb-4 "><!> <div class="flex flex-col items-center pt-2 pb-2"><img src="/cloudward.png" alt="Logo" class="w-15 h-15 mt-6"> <h1 class="text-3xl text-white font-bold mt-2">CloudWard</h1> <p class="text-white text-base">Registration</p></div> <form class="flex flex-col items-center space-y-4 mt-3 w-full"><label class="flex flex-row justify-around w-1/2"><input type="radio" name="radio-9" class="radio radio-info" required> <p class="text-white">Male</p> <input type="radio" name="radio-9" class="radio radio-info"> <p class="text-white">Female</p></label> <label class="input validator input-neutral svelte-gxv4vn"><!> <input class="grow" pattern="[A-Za-z]+([ '\\-][A-Za-z]+)*$" required type="text" placeholder="First Name"></label> <label class="input validator input-neutral svelte-gxv4vn"><!> <input class="grow" pattern="[A-Za-z]+([ '\\-][A-Za-z]+)*$" required type="text" placeholder="Last Name"></label> <input type="date" class="input input-neutral svelte-gxv4vn" placeholder="Birthdate"> <label class="input input-neutral svelte-gxv4vn"><!> <input class="grow" title="Enter a valid phone number starting with 09" maxlength="11" required type="tel" placeholder="e.g. 09943367206"></label> <label class="input input-neutral svelte-gxv4vn"><!> <input class="grow" type="text" placeholder="Address"></label> <label class="input validator input-neutral svelte-gxv4vn"><!> <input class="grow" type="email" placeholder="Email"></label> <label class="input input-neutral svelte-gxv4vn"><!> <input class="grow" minlength="6" type="password" placeholder="Password"></label> <button type="submit" class="btn btn-success btn-soft rounded-xl w-1/2 font-bold"><!></button> <p class="text-white text-sm">Already have an account? <a href="/login" class="log-link font-bold text-[#181818] svelte-gxv4vn">Login</a></p> <!> <!></form></div></div>`);function la(c,n){P(n,!1);const f=[];let b=d(""),v=d(""),_=d(""),i=d(""),u=d(""),N=d(""),k=d(""),z=d(""),F=d(""),h=d(""),j=d(!1);async function be(){l(j,!0),l(h,"");try{const o=(await Fe(je,a(k),a(z))).user;await qe(Ee(Le,"users",o.uid),{name:a(b),surname:a(v),birthdate:a(_),sex:a(i),phone:a(u),address:a(N),email:o.email,role:"Patient"}),l(F,"Account created successfully."),window.location.href="/login"}catch(e){e instanceof Error&&(e.message.includes("email-already-in-use")?l(h,"This email is already registered. Please use a different email."):e.message.includes("invalid-email")?l(h,"Invalid email format. Please enter a valid email address."):(l(h,"Something went wrong. Please try again."),console.error(e.message)),console.error(e.message))}finally{l(j,!1)}}ze();var q=We(),Y=s(q),ee=s(Y);De(ee);var E=t(ee,4),L=s(E),x=s(L);p(x),x.value=x.__value="male";var A=t(x,4);p(A),A.value=A.__value="female",Ae(2),r(L);var Z=t(L,2),ae=s(Z);ge(ae,{});var te=t(ae,2);p(te),r(Z);var B=t(Z,2),se=s(B);ge(se,{});var re=t(se,2);p(re),r(B);var C=t(B,2);p(C);var H=t(C,2),le=s(H);He(le,{});var ne=t(le,2);p(ne),r(H);var I=t(H,2),ie=s(I);Ce(ie,{});var oe=t(ie,2);p(oe),r(I);var D=t(I,2),de=s(D);Ze(de,{});var K=t(de,2);p(K),Ne(K,"pattern","^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]4$"),r(D);var R=t(D,2),ce=s(R);Be(ce,{});var ve=t(ce,2);p(ve),r(R);var U=t(R,2),_e=s(U);{var he=e=>{var o=Ke();m(e,o)},xe=e=>{var o=Me("Register");m(e,o)};S(_e,e=>{a(j)?e(he):e(xe,!1)})}r(U);var ue=t(U,4);{var we=e=>{var o=Re(),w=s(o),y=s(w),W=s(y,!0);r(y),r(w),r(o),pe(()=>me(W,a(h))),m(e,o)};S(ue,e=>{a(h)&&e(we)})}var ye=t(ue,2);{var $e=e=>{var o=Ue(),w=s(o),y=s(w),W=s(y,!0);r(y),r(w),r(o),pe(()=>me(W,a(F))),m(e,o)};S(ye,e=>{a(F)&&e($e)})}r(E),r(Y),r(q),fe(f,[],x,()=>a(i),e=>l(i,e)),fe(f,[],A,()=>a(i),e=>l(i,e)),g(te,()=>a(b),e=>l(b,e)),g(re,()=>a(v),e=>l(v,e)),g(C,()=>a(_),e=>l(_,e)),g(ne,()=>a(u),e=>l(u,e)),g(oe,()=>a(N),e=>l(N,e)),g(K,()=>a(k),e=>l(k,e)),g(ve,()=>a(z),e=>l(z,e)),Pe("submit",E,ke(be)),m(c,q),M()}export{la as component};
